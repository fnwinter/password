<!DOCTYPE html>
<html>

<head>
  <title>Password Manager</title>
  <script type="module" src="https://pyscript.net/releases/2025.8.1/core.js"></script>
  <style>
    #loading {
      outline: none;
      border: none;
      background: transparent
    }
  </style>
  <script type="module" src="password.js"></script>
  <script type="module">
    const loading = document.getElementById('loading');
    addEventListener('py:ready', () => loading.close());
    loading.showModal();
  </script>
</head>

<body>
  <h2>Password Manager</h2>
  <dialog id="loading">
    <h1>Loading...</h1>
  </dialog>
  
  <dialog id="passwordDialog">
    <h3>Enter Master Password</h3>
    <p>This URL contains encrypted data. Please enter the master password to decrypt it.</p>
    <div>
      <label>Master Password: <input type="password" id="dialogMasterPassword" placeholder="Enter master password"></label>
    </div>
    <div>
      <button onclick="decryptUrlData()">Decrypt</button>
      <button onclick="closePasswordDialog()">Cancel</button>
    </div>
  </dialog>
  <hr color="red" size="2px"/>
  <br/>
  <div id="site_info">
  </div>
  <br/>
  <div id="new_site">
    <button onclick="addNewSite()">Add Site</button>
  </div>
  <br/>
  <hr color="red" size="2px"/>
  <br/>
  <div>
    <label>Master Password: <input type="password" id="masterPasswordInput"
        placeholder="Enter master password"></label>
    <label>Confirm Master Password: <input type="password" id="confirmMasterPasswordInput"
        placeholder="Confirm master password"></label>
    <button onclick="toggleMasterPasswords()">Show/Hide</button>
  </div>
  <br/>
  <div>
    <button onclick="generateUrl()">Generate URL</button>
    <div id="call_python"></div>
  </div>
  <br/>
  <hr color="red" size="2px"/>
  <div id="get_url">
    <h3>Get URL
    <button onclick="copyToClipboard()">Copy to Clipboard</button>
    </h3>
    <div>
      <label>
        <textarea id="fullUrlInput" placeholder="Enter full URL" rows="10"
          cols="100"></textarea>
      </label>
    </div>
    <br/>
    <hr color="red" size="2px"/>
    <br/>
  </div>

  <script type="py" src="./password.py" config="./password.toml"></script>
</body>
</html>