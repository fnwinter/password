<!DOCTYPE html>
<html>

<head>
  <meta charset="UTF-8">
  <title>Password Manager</title>
  <style>
    #loading {
      outline: none;
      border: none;
      background: transparent
    }
    #fullUrlInput {
      width: 100%;
      box-sizing: border-box;
    }
  </style>
  <script type="module" src="https://pyscript.net/releases/2025.8.1/core.js"></script>
  <script type="module" src="password.js"></script>
  <script type="module">
    const loading = document.getElementById('loading');
    addEventListener('py:ready', () => loading.close());
    loading.showModal();
  </script>
  <link rel="stylesheet" href="forkme.css" />
</head>

<body>
  <a class="github-fork-ribbon" href="https://github.com/fnwinter/password" data-ribbon="Fork me on GitHub" title="Fork me on GitHub">Fork me on GitHub</a>

  <h2>Password Manager</h2>
  <p>
  Even if the content is encrypted, do not share the URL. It may not be secure, and any issues arising from the use of this page are the sole responsibility of the user.

  <!--- loading dialog --->
  <dialog id="loading">
    <h1>Loading...</h1>
  </dialog>

  <!--- password dialog --->
  <dialog id="passwordDialog">
    <h3>Enter Master Password</h3>
    <p>This URL contains encrypted data. Please enter the master password to decrypt it.</p>
    <div>
      <label>Master Password: <input type="password" id="dialogMasterPassword"
          placeholder="Enter master password"></label>
    </div>
    <div>
      <button onclick="decryptUrlData()">Decrypt</button>
      <button onclick="closePasswordDialog()">Cancel</button>
    </div>
  </dialog>

  <hr color="red" size="2px" />
  <br />
  <div id="site_info">
  </div>
  <br />
  <div id="new_site">
    <button onclick="addNewSite()">Add Site</button>
  </div>
  <br />

  <hr color="red" size="2px" />
  <br />
  <div>
    <label>Master Password: <input type="password" id="masterPasswordInput" placeholder="Enter master password (min 12 characters)" minlength="12"></label>
    <label>Confirm Master Password: <input type="password" id="confirmMasterPasswordInput"
        placeholder="Confirm master password (min 12 characters)" minlength="12"></label>
    <button onclick="toggleMasterPasswords()">ğŸ‘ï¸</button>
  </div>
  <br />
  <div>
    <button onclick="generateUrl()">Generate URL</button>
    <div id="call_python"></div>
  </div>
  <br />

  <hr color="red" size="2px" />
  <div id="get_url">
    <h3>Get URL
      <button onclick="copyToClipboard()">ğŸ“‹</button>
    </h3>
    <div>
      <label>
        <textarea id="fullUrlInput" placeholder="Enter full URL" rows="20" ></textarea>
      </label>
    </div>
    <br />
    <hr color="red" size="2px" />
    <br />
  </div>

  <center>Copyright by fnwinter, since 2025.11.19.21.12</center>

  <!--- load python script --->
  <script type="py" src="./password.py" config="./password.toml"></script>
</body>

</html>